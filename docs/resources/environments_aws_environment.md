---
page_title: "cdp_environments_aws_environment Resource - terraform-provider-cdp"
subcategory: "environments"
description: |-
  The environment is a logical entity that represents the association of your user account with multiple compute resources using which you can provision and manage workloads.
---

# cdp_environments_aws_environment (Resource)

The environment is a logical entity that represents the association of your user account with multiple compute resources using which you can provision and manage workloads.

## Example Usage

```terraform
## Copyright 2023 Cloudera. All Rights Reserved.
#
# This file is licensed under the Apache License Version 2.0 (the "License").
# You may not use this file except in compliance with the License.
# You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
#
# This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
# OF ANY KIND, either express or implied. Refer to the License for the specific
# permissions and limitations governing your use of the file.

resource "cdp_environments_aws_credential" "example" {
  credential_name = "example-cdp-aws-credential"
  role_arn        = "arn:aws:iam::11111111111:role/example-cross-account-role"
  description     = "Example AWS Credentials"
}

resource "cdp_environments_aws_environment" "example" {
  environment_name = "example-environment"
  credential_name  = cdp_environments_aws_credential.example.credential_name
  region           = "<your-region>"
  security_access = {
    cidr = "0.0.0.0/0"
  }
  authentication = {
    public_key_id = "my-key"
  }
  log_storage = {
    storage_location_base = "s3a://storage-bucket/location"
    instance_profile      = "arn:aws:iam::11111111111:instance-profile/storage-instance-profile"
  }
  vpc_id = "vpc-1"
  subnet_ids = [ "<env-subnet-1>", "<env-subnet-2>", "<env-subnet-3>" ]
  compute_cluster = {
    enabled = false
    configuration = {
      kube_api_authorized_ip_ranges = ["0.0.0.0/0"]
      worker_node_subnets = [ "<env-subnet-1>", "<env-subnet-2>", "<env-subnet-3>" ]
    }
  }
}

output "credential" {
  value = cdp_environments_aws_credential.example
}

output "environment" {
  value = cdp_environments_aws_environment.example
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `authentication` (Attributes) (see [below for nested schema](#nestedatt--authentication))
- `credential_name` (String)
- `environment_name` (String)
- `log_storage` (Attributes) (see [below for nested schema](#nestedatt--log_storage))
- `region` (String)
- `security_access` (Attributes) (see [below for nested schema](#nestedatt--security_access))
- `subnet_ids` (Set of String)
- `vpc_id` (String)

### Optional

- `cascading_delete` (Boolean)
- `compute_cluster` (Attributes) Option to set up Externalized compute cluster for the environment. (see [below for nested schema](#nestedatt--compute_cluster))
- `create_private_subnets` (Boolean)
- `create_service_endpoints` (Boolean)
- `description` (String)
- `enable_tunnel` (Boolean)
- `encryption_key_arn` (String)
- `endpoint_access_gateway_scheme` (String)
- `endpoint_access_gateway_subnet_ids` (Set of String)
- `freeipa` (Attributes) (see [below for nested schema](#nestedatt--freeipa))
- `polling_options` (Attributes) Polling related configuration options that could specify various values that will be used during CDP resource creation. (see [below for nested schema](#nestedatt--polling_options))
- `proxy_config_name` (String)
- `s3_guard_table_name` (String)
- `tags` (Map of String)
- `workload_analytics` (Boolean)

### Read-Only

- `crn` (String)
- `id` (String) The ID of this resource.
- `report_deployment_logs` (Boolean, Deprecated) [Deprecated] When true, this will report additional diagnostic information back to Cloudera.
- `status` (String)
- `status_reason` (String)
- `tunnel_type` (String)

<a id="nestedatt--authentication"></a>
### Nested Schema for `authentication`

Optional:

- `public_key` (String)
- `public_key_id` (String)


<a id="nestedatt--log_storage"></a>
### Nested Schema for `log_storage`

Required:

- `instance_profile` (String)
- `storage_location_base` (String)

Optional:

- `backup_storage_location_base` (String)


<a id="nestedatt--security_access"></a>
### Nested Schema for `security_access`

Optional:

- `cidr` (String)
- `default_security_group_id` (String)
- `default_security_group_ids` (Set of String)
- `security_group_id_for_knox` (String)
- `security_group_ids_for_knox` (Set of String)


<a id="nestedatt--compute_cluster"></a>
### Nested Schema for `compute_cluster`

Required:

- `enabled` (Boolean)

Optional:

- `configuration` (Attributes) The Externalized k8s configuration for the environment. (see [below for nested schema](#nestedatt--compute_cluster--configuration))

<a id="nestedatt--compute_cluster--configuration"></a>
### Nested Schema for `compute_cluster.configuration`

Optional:

- `kube_api_authorized_ip_ranges` (Set of String) Kubernetes API authorized IP ranges in CIDR notation. Mutually exclusive with privateCluster.
- `private_cluster` (Boolean) If true, creates private cluster. False, if not specified
- `worker_node_subnets` (Set of String) Specify subnets for Kubernetes Worker Nodes. If not specified, then the environment's subnet(s) will be used.



<a id="nestedatt--freeipa"></a>
### Nested Schema for `freeipa`

Optional:

- `catalog` (String)
- `image_id` (String)
- `instance_count_by_group` (Number)
- `instance_type` (String)
- `multi_az` (Boolean)
- `os` (String)
- `recipes` (Set of String)

Read-Only:

- `instances` (Attributes Set) (see [below for nested schema](#nestedatt--freeipa--instances))

<a id="nestedatt--freeipa--instances"></a>
### Nested Schema for `freeipa.instances`

Read-Only:

- `availability_zone` (String)
- `discovery_fqdn` (String)
- `instance_group` (String)
- `instance_id` (String)
- `instance_status` (String)
- `instance_status_reason` (String)
- `instance_type` (String)
- `instance_vm_type` (String)
- `life_cycle` (String)
- `private_ip` (String)
- `public_ip` (String)
- `ssh_port` (Number)
- `subnet_id` (String)



<a id="nestedatt--polling_options"></a>
### Nested Schema for `polling_options`

Optional:

- `async` (Boolean) Boolean value that specifies if Terraform should wait for resource creation/deletion.
- `call_failure_threshold` (Number) Threshold value that specifies how many times should a single call failure happen before giving up the polling.
- `polling_timeout` (Number) Timeout value in minutes that specifies for how long should the polling go for resource creation/deletion.