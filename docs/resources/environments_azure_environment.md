---
page_title: "cdp_environments_azure_environment Resource - terraform-provider-cdp"
subcategory: "environments"
description: |-
  The environment is a logical entity that represents the association of your user account with multiple compute resources using which you can provision and manage workloads.
---

# cdp_environments_azure_environment (Resource)

The environment is a logical entity that represents the association of your user account with multiple compute resources using which you can provision and manage workloads.

## Example Usage

```terraform
## Copyright 2023 Cloudera. All Rights Reserved.
#
# This file is licensed under the Apache License Version 2.0 (the "License").
# You may not use this file except in compliance with the License.
# You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
#
# This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
# OF ANY KIND, either express or implied. Refer to the License for the specific
# permissions and limitations governing your use of the file.

resource "cdp_environments_azure_credential" "example-cred" {
  credential_name = "example-cdp-azure-credential"
  subscription_id = "<value>"
  tenant_id       = "<value>"
  app_based = {
    application_id = "<value>"
    secret_key     = "<value>"
  }
  description = "Example Azure Credential"
}

resource "cdp_environments_azure_environment" "example-env" {
  environment_name = "example-cdp-azure-environment"
  credential_name  = cdp_environments_azure_credential.example-cred.credential_name
  region           = "<your-region>"
  security_access = {
    cidr = "0.0.0.0/0"
  }
  existing_network_params = {
    network_id          = "network-name"
    resource_group_name = "rg-name"
    subnet_ids          = ["<env-subnet-1>", "<env-subnet-2>", "<env-subnet-3>"]
  }
  public_key = "my-key"
  log_storage = {
    storage_location_base = "abfs://rgname-fs@rgname-storage.dfs.core.windows.net"
    managed_identity      = "/subscriptions/123e4567-e89b-12d3-a456-426614174000/resourcegroups/my-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/logger"
  }
  resource_group_name              = "rg-name"
  encryption_user_managed_identity = "some-identity"
  use_public_ip                    = true
  compute_cluster = {
    enabled = false
    configuration = {
      private_cluster               = false
      outbound_type                 = "udr"
      kube_api_authorized_ip_ranges = ["0.0.0.0/0"]
      worker_node_subnets           = ["<env-subnet-1>", "<env-subnet-2>", "<env-subnet-3>"]
    }
  }
}

output "credential" {
  value = cdp_environments_azure_credential.example-cred
}

output "environment" {
  value = cdp_environments_azure_environment.example-env
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `credential_name` (String)
- `environment_name` (String)
- `existing_network_params` (Attributes) (see [below for nested schema](#nestedatt--existing_network_params))
- `log_storage` (Attributes) (see [below for nested schema](#nestedatt--log_storage))
- `public_key` (String)
- `region` (String)
- `security_access` (Attributes) (see [below for nested schema](#nestedatt--security_access))
- `use_public_ip` (Boolean)

### Optional

- `cascading_delete` (Boolean, Deprecated)
- `compute_cluster` (Attributes) Option to set up Externalized compute cluster for the environment. (see [below for nested schema](#nestedatt--compute_cluster))
- `create_private_endpoints` (Boolean)
- `delete_options` (Attributes) Options for deleting the environment. (see [below for nested schema](#nestedatt--delete_options))
- `description` (String)
- `enable_outbound_load_balancer` (Boolean)
- `enable_tunnel` (Boolean)
- `encryption_at_host` (Boolean)
- `encryption_key_resource_group_name` (String)
- `encryption_key_url` (String)
- `encryption_user_managed_identity` (String)
- `endpoint_access_gateway_scheme` (String) The scheme for the endpoint gateway. PUBLIC creates an external endpoint that can be accessed over the Internet. Defaults to PRIVATE which restricts the traffic to be internal to the VPC.
- `endpoint_access_gateway_subnet_ids` (Set of String) The subnets to use for endpoint access gateway.
- `freeipa` (Attributes) (see [below for nested schema](#nestedatt--freeipa))
- `polling_options` (Attributes) Polling related configuration options that could specify various values that will be used during CDP resource creation. (see [below for nested schema](#nestedatt--polling_options))
- `proxy_config_name` (String)
- `resource_group_name` (String)
- `tags` (Map of String)
- `workload_analytics` (Boolean)

### Read-Only

- `crn` (String)
- `id` (String) The ID of this resource.
- `report_deployment_logs` (Boolean) [Deprecated] When true, this will report additional diagnostic information back to Cloudera.
- `status` (String)
- `status_reason` (String)

<a id="nestedatt--existing_network_params"></a>
### Nested Schema for `existing_network_params`

Required:

- `network_id` (String)
- `resource_group_name` (String)
- `subnet_ids` (Set of String)

Optional:

- `aks_private_dns_zone_id` (String)
- `database_private_dns_zone_id` (String)
- `flexible_server_subnet_ids` (Set of String)


<a id="nestedatt--log_storage"></a>
### Nested Schema for `log_storage`

Required:

- `managed_identity` (String)
- `storage_location_base` (String)

Optional:

- `backup_storage_location_base` (String)


<a id="nestedatt--security_access"></a>
### Nested Schema for `security_access`

Optional:

- `cidr` (String)
- `default_security_group_id` (String)
- `default_security_group_ids` (Set of String)
- `security_group_id_for_knox` (String)
- `security_group_ids_for_knox` (Set of String)


<a id="nestedatt--compute_cluster"></a>
### Nested Schema for `compute_cluster`

Required:

- `enabled` (Boolean)

Optional:

- `configuration` (Attributes) The Externalized k8s configuration for the environment. (see [below for nested schema](#nestedatt--compute_cluster--configuration))

<a id="nestedatt--compute_cluster--configuration"></a>
### Nested Schema for `compute_cluster.configuration`

Optional:

- `kube_api_authorized_ip_ranges` (Set of String) Kubernetes API authorized IP ranges in CIDR notation. Mutually exclusive with privateCluster.
- `outbound_type` (String) Customize cluster egress with defined outbound type in Azure Kubernetes Service. Possible value(s): udr
- `private_cluster` (Boolean) If true, creates private cluster. False, if not specified
- `worker_node_subnets` (Set of String) Specify subnets for Kubernetes Worker Nodes. If not specified, then the environment's subnet(s) will be used.



<a id="nestedatt--delete_options"></a>
### Nested Schema for `delete_options`

Optional:

- `cascading` (Boolean) If true, all resources in the environment will be deleted.
- `forced` (Boolean) Force delete action removes CDP resources and may leave cloud provider resources running even if the deletion did not succeed.


<a id="nestedatt--freeipa"></a>
### Nested Schema for `freeipa`

Optional:

- `architecture` (String) CPU architecture of the freeipa instance. Can be either X86_64 or ARM64.
- `catalog` (String)
- `image_id` (String)
- `instance_count_by_group` (Number)
- `instance_type` (String)
- `multi_az` (Boolean)
- `os` (String)
- `recipes` (Set of String)

Read-Only:

- `instances` (Attributes Set) (see [below for nested schema](#nestedatt--freeipa--instances))

<a id="nestedatt--freeipa--instances"></a>
### Nested Schema for `freeipa.instances`

Read-Only:

- `availability_zone` (String)
- `discovery_fqdn` (String)
- `instance_group` (String)
- `instance_id` (String)
- `instance_status` (String)
- `instance_status_reason` (String)
- `instance_type` (String)
- `instance_vm_type` (String)
- `life_cycle` (String)
- `private_ip` (String)
- `public_ip` (String)
- `ssh_port` (Number)
- `subnet_id` (String)



<a id="nestedatt--polling_options"></a>
### Nested Schema for `polling_options`

Optional:

- `async` (Boolean) Boolean value that specifies if Terraform should wait for resource creation/deletion.
- `call_failure_threshold` (Number) Threshold value that specifies how many times should a single call failure happen before giving up the polling.
- `polling_timeout` (Number) Timeout value in minutes that specifies for how long should the polling go for resource creation/deletion.